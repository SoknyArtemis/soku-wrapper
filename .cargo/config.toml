# 使用 MSVC 目标和 Zig 作为链接器的高性能配置

[target.x86_64-pc-windows-msvc]
linker = "zig.exe"
rustflags = [
  "-C", "target-cpu=native",          # 针对当前CPU进行优化
  "-C", "codegen-units=1",            # 最大化优化
  "-C", "opt-level=3",                # 发布模式下使用最高优化级别
  "-C", "panic=abort",                # 禁用展开机制以提高性能
  "-C", "link-arg=-target",
  "-C", "link-arg=x86_64-windows-msvc",
]

[env]
"CC_x86_64_pc_windows_msvc" = "zig.exe cc -target x86_64-windows-msvc"
"CXX_x86_64_pc_windows_msvc" = "zig.exe c++ -target x86_64-windows-msvc"
"LINK_x86_64_pc_windows_msvc" = "zig.exe cc -target x86_64-windows-msvc"
"AR_x86_64_pc_windows_msvc" = "zig.exe ar"